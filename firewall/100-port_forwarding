# This script configures UFW to forward traffic from port 8080 to port 80 on web-01
# The configuration is applied to allow incoming requests on port 8080 and redirect them to port 80

# Enable IP forwarding in sysctl.conf
sudo nano /etc/ufw/sysctl.conf
# Uncomment the line: net/ipv4/ip_forward=1

# Add port forwarding rule in UFW's before.rules
sudo nano /etc/ufw/before.rules
# Insert the following lines at the beginning of the file:
# *nat
# :PREROUTING ACCEPT [0:0]
# -A PREROUTING -p tcp --dport 8080 -j REDIRECT --to-port 80
# COMMIT

# Reload UFW to apply the changes
sudo ufw disable
sudo ufw enable

# Check UFW status to confirm the rules are applied
sudo ufw status
